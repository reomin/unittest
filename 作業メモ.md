# 作業メモ

## src/04/06/index.test.ts

- jest.mock("../fetchers"); の使い所がわからん時ある

```
//ここの第二引数で、型を指定しない理由は？？
function mockPostMyArticle(input: ArticleInput, status: number = 200){
  if(status > 299){
    return jest.spyOn(Fetchers, "postMyArticle").mockRejectedValueOnce(httpError);
  }
  try{
    checkLength(input.title);
    checkLength(input.body);
    return jest.spyOn(Fetchers, "postMyArticle").mockResolvedValueOnce({
      ...postMyArticleData, ...input
    })
  } catch (err){
    return jest.spyOn(Fetchers, "postMyArticle").mockRejectedValueOnce(httpError);
  }
}
```

```
//この関数の役割がいまいちわからない
//Partialって何？
function inputFactory(input?: Partial<ArticleInput>): ArticleInput {
  return {
    tags: ["testing"],
    title: "TypeScript を使ったテストの書き方",
    body: "テストを書く時、TypeScript を使うことで、テストの保守性が向上します。",
    ...input,
  } ;
}
```

```
expect.assertions(2);はなぜここだけ？？
```

test("バリデーションが失敗した後に、reject される", async()=>{
expect.assertions(2);
})

```
- src/05/03/Form.test.tsx

```

//P97
test("名前の表示", () =>{
render(<Form name="taro" />);
expect(screen.getByText("taro")).toBeInTheDocument();
})

```

プロパティ 'toBeInTheDocument' は型 'JestMatchers<HTMLElement>' に存在しません。

```

- これ全てのアサーションを覚えるのは無理だな
- まず何をテストしたいのか？を自然言語で書いておくのが良さそう
- snapショットのファイルが何をしているかはわからん
- src/05/04/ArticleList.stories.tsxの読み方
- コンポーネントが分かれていたら、ファイル構成でテストを書く

- P113 アクセしブルネームに関して
- UIコンポーネントテスト結構、E2Eテストに近い？？
const user = userEvent.setup();　とかも

- P117 
  - return inputValues;をする理由は？？

- P119
  - const data: { [k: string]: unknown } = {};の書き方

- P121
```
     expect(mockFn).toHaveBeenCalledWith(
      expect.objectContaining({ ...contactNumber, ...deliveryAddress })
    );

    上記で確認する理由は？？
```

P124 status = 201になってる
